<div id="formcontainer"  ng-app="Risk" ng-controller="EditRiskController as ctrl">
    <get-risk></get-risk>
    <div ng-if="ctrl.initDone && ctrl.userDone" id="myeditform" type="space" layout-padding="" ng-cloak="">   
        <form id="form" name="EditRisk" role="form" ng-submit="ctrl.valid() && ctrl.submit()" novalidate>
            <div class="layout">
                    <table id="summary" class="layout" border="1">
                        <tr>
                            <td class="label">Risk #</td>
                            <td class="locked">{{ctrl.risk.riskid}}</td>
                            <td class="label">
                                Current Risk Level
                            </td>
                            <td  class="locked {{ctrl.risk.risklevel.cls}}">
                                {{ctrl.risk.risklevel.level}}
                            </td>
                        </tr>
                        <tr>
                            <td class="label">
                                Owner
                            </td>
                            <td class="locked">
                               <div  ng-show="ctrl.config.owner.done" ng-model="ctrl.risk.owner" config="owner" webix-ui="owner" id="owner" width="200" height="30" name="owner" options="users" type="richselect" />
                            </td>
                            <td class="label">
                                Risk State
                            </td>
                            <td class="locked">
                               Open
                            </td>
                        </tr>
                         <tr>
                            <td class="label">
                                Creator
                            </td>
                            <td class="locked">
                                Admin
                            </td>
                            <td class="label">
                                Risk Approver
                            </td>
                            <td class="locked">
                               <div  ng-show="ctrl.config.approver.done" ng-model="ctrl.risk.approver" config="approver" webix-ui="approver" id="approver" width="200" height="30" name="approver" options="users" type="richselect" />
                            </td>
                        </tr>
                    </table>
                    <br />
                    
                    <h2>Risk Information</h2>
                    <table id="details" class="layout" border="1">
                        <tr>
                            <td class="label" style="vertical-align: top">
                                Title
                            </td>
                            <td class="locked">
                                <div  ng-show="ctrl.config.risktitle.done" ng-model="ctrl.config.risktitle" config="risktitle" webix-ui="risktitle" width="500" height="30" type="text" id="risktitle" name="risktitle"></div>
                            </td>
                        </tr>
                        <tr>
                            <td class="label" style="vertical-align: top">
                                Risk Statement
                            </td>
                            <td  class="locked" style="vertical-align: top">
                                <div  ng-show="ctrl.config.riskstatement.done" config="riskstatement" webix-ui="riskstatement" width="500" height="97" type="textarea" id="riskstatement" name="riskstatement"></div>
                            </td>
                        </tr>
                        <tr>
                            <td class="label" style="vertical-align: top">
                                Context
                            </td>
                            <td  class="locked" style="vertical-align: top">
                                 <div  ng-show="ctrl.config.context.done" config="context" webix-ui="context" width="500" height="97" type="textarea" id="context" name="context"></div>
                            </td>
                        </tr>
                        <tr>
                            <td class="label" style="vertical-align: top">
                                Closure Criteria
                            </td>
                            <td  class="locked" style=" vertical-align: top">
                                 <div  ng-show="ctrl.config.closurecriteria.done" config="closurecriteria" webix-ui="closurecriteria" width="500" height="97" type="textarea" id="closurecriteria" name="closurecriteria"></div>
                            </td>
                        </tr>
                        <tr>
                            <td class="label" style="vertical-align: top">
                                Owner Notes
                            </td>
                            <td  class="locked" style=" vertical-align: top">
                                 <!--div ng-show="ctrl.config.ownernotes.done" config="ownernotes" webix-ui="ownernotes" width="500" height="97" type="textarea" id="ownernotes" name="ownernotes"></div-->
                            </td>
                        </tr>
                        <tr>
                            <td class="label" style="vertical-align: top">
                                Approver Comments
                            </td>
                            <td  class="locked" style=" vertical-align: top">
                                <!--div ng-show="ctrl.config.approvercomments.done" config="approvercomments" webix-ui="approvercomments" width="500" height="97" type="textarea" id="approvercomments" name="approvercomments"></div-->
                            </td>
                        </tr>
                    </table>
                   <div>
                   <button id="submit" type="submit">Edit Risk</button>
            </div>       
        </form>
            <br />
         <form id="formEvt" name="EditEvents" role="form" ng-submit="ctrl.validEvt() && ctrl.submitEvt()" novalidate>  
            <table class="events table-condensed" border=1>
                <thead>
                    <tr>
                            <th>
                                #
                            </th>
                            <th>
                                Event Title
                            </th>
                            <th>
                                Event Owner
                            </th>
                            <th>
                                Actual Date
                            </th>
                            <th>
                                Schedule Date
                            </th>
                            <th>
                                Risk Level
                            </th>
                            <th>
                                Like
                            </th>
                            <th>
                                Tech
                            </th>
                            <th>
                                Schd
                            </th>
                            <th>
                                Cost
                            </th>
                            <th>
                                 &nbsp;&nbsp;+&nbsp;&nbsp;
                            </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="event in [0]">
                        <td>
                            {{event}}
                        </td>
                        <td>
                            Risk Identified
                        </td>
                        <td>
                            {{ctrl.risk.ownername}}
                        </td>
                        <td>
                            {{ctrl.risk.assessmentdate | date: "M/d/y"}}
                        </td>
                        <td>
                            {{ctrl.risk.assessmentdate | date: "M/d/y"}}
                        </td>
                        <td class="{{ctrl.risk.risklevel.cls}}">
                            {{ctrl.risk.risklevel.level}} 
                        </td>
                        <td style="text-align: center">
                            {{ctrl.risk.risklevel.likelihood}}
                        </td>
                        <td style="text-align: center">
                            {{ctrl.risk.risklevel.technical}}
                        </td>
                        <td style="text-align: center">
                           {{ctrl.risk.risklevel.schedule}}
                        </td>
                        <td style="text-align: center">
                           {{ctrl.risk.risklevel.cost}}
                        </td>
                        <td>
                            <input class="addEvent" type="button" id="evt{{event}}" ng-if="event != 5" style="display:none" ng-click="ctrl.enable(event+1)" value="+">
                        </td>
                    </tr>
                    <tr ng-repeat="event in [1,2,3,4,5]">
                        <td>
                            {{event}}
                        </td>
                        <td>
                            <div class="evt{{event}}" enabled="{{ctrl.enabledItem[event]}}" ng-show="ctrl.config.eventtitle{{event}}.done"  config="eventtitle{{event}}" webix-ui="eventtitle{{event}}" width="250" height="30" type="text" id="eventtitle{{event}}" name="eventtitle[{{event}}]"></div>
                        </td>
                        <td>
                            <div class="evt{{event}}" enabled="{{ctrl.enabledItem[event]}}" ng-show="ctrl.config.owner{{event}}.done" ng-model="ctrl.risk.owner[event]" config="owner{{event}}" webix-ui="owner{{event}}" id="owner{{event}}" width="250" height="30" name="owner[{{event}}]" options="users" type="richselect" />
                        </td>
                        <td>
                            <div class="evt{{event}}" enabled="{{ctrl.enabledItem[event]}}" ng-show="ctrl.config.actualdate{{event}}.done" config="actualdate{{event}}" webix-ui="actualdate{{event}}" id="actualdate{{event}}" width="200" height="30" name="actualate[{{event}}]" value="today" type="datepicker" />
                        </td>
                        <td>
                            <div class="evt{{event}}" enabled="{{ctrl.enabledItem[event]}}" ng-show="ctrl.config.scheduledate{{event}}.done" config="scheduledate{{event}}" webix-ui="scheduledate{{event}}" id="scheduledate{{event}}" width="200" height="30" name="scheduledate[{{event}}]" value="today" type="datepicker" />
                        </td>
                        <td name="level" evt="{{event}}">
                        </td>
                        <td>
                            <div evt="{{event}}" class="evt{{event}}" enabled="{{ctrl.enabledItem[event]}}" ng-show="ctrl.config.likelihood{{event}}.done" type="level" config="likelihood{{event}}" webix-ui="likelihood{{event}}" width="30" height="30" type="text" id="likelihood{{event}}" name="likelihood[{{event}}]"></div>
                        </td>                                                                                                                          
                        <td>
                            <div evt="{{event}}" class="evt{{event}}" enabled="{{ctrl.enabledItem[event]}}" ng-show="ctrl.config.technical{{event}}.done"  type="level" config="technical{{event}}" webix-ui="technical{{event}}" width="30" height="30" type="text" id="technical{{event}}" name="technical[{{event}}]"></div>
                        </td>
                        <td>
                            <div evt="{{event}}" class="evt{{event}}" enabled="{{ctrl.enabledItem[event]}}" ng-show="ctrl.config.schedule{{event}}.done"  type="level" config="schedule{{event}}" webix-ui="schedule{{event}}" width="30" height="30" type="text" id="schedule{{event}}" name="schedule[{{event}}]"></div>
                        </td>
                        <td>
                            <div evt="{{event}}" class="evt{{event}}" enabled="{{ctrl.enabledItem[event]}}" ng-show="ctrl.config.cost{{event}}.done"  type="level" config="cost{{event}}" webix-ui="cost{{event}}" width="30" height="30" type="text" id="cost{{event}}" name="cost[{{event}}]"></div>
                        </td>
                        <td>
                            <input class="addEvent" type="button" id="evt{{event}}" ng-if="event != 5" style="display:none" ng-click="ctrl.enable(event+1)" value="+">
                        </td>
                    </tr>
                </tbody>
            </table>
           </form>                  
         </div> 
         <divider></divider>
          <div class="msg" layout-align="center">
            <span ng-bind-html="msg">{{msg}}</span>
          </div>
    </div> 
    <init-risk />  
</div>
    